$(document).ready(function(){b();var i=null;var r={i:"",s:0,t:0,o:0,l:0,$:"",u:"",A:"",S:"",h:"",v:"",K:"",N:""};var a=[];var e;var n;var t=[];var c=[];var o="";var d="";function f(){$(".grp-btn").O("disabled",false)}function l(){$(".grp-btn").O("disabled",true)}$("#categoria").m(function(){var i=$(this).H();var a=$(this).k("id");switch(i){case"Junior":r.i="Junior";r.s=2;r.t=0;break;case"Cadete":r.i="Cadete";r.s=2;r.t=0;break;case"Sub-21":r.i="Sub-21";r.s=3;r.t=0;break;case"Senior":r.i="Senior";r.s=3;r.t=0;break;case"Libre":r.i="Libre";r.s=1;r.t=30;break;default:b();return}u();$("#START").O("disabled",false);$(".tiempo").O("disabled",false);$(".amonestacion").O("disabled",false);$(".descalificacion").O("disabled",false);$("#consola").text("")});function u(){$.U(r,function(i,a){console.log("Pizarra: "+i+": "+r[i])});a=r;e=r.s;n=r.t;O()}function A(i){hora=S();console.log(hora+": "+i);e=r.s<10?"0"+r.s:r.s;n=r.t<10?"0"+r.t:r.t;$("#consola").append($("<div><b>"+i+":</b> "+e+":"+n+" | AO: "+r.l+" - AKA: "+r.o+" | senshu: "+r.$+" "+hora+" </div>"))}function S(){var i=new Date;var a={I:"numeric",g:"2-digit",p:"2-digit",T:"2-digit",C:"2-digit",R:"2-digit",D:false};return new Intl.DateTimeFormat("es-VE",a).format(i).replace(/\//g,"-").replace(",","")}$("button").click(function(){var i=$(this).H();var a=$(this).k("id");A(a)});$("select").m(function(){var i=$(this).H();var a=$(this).k("id");A(a+" "+i)});function b(){$("button").O("disabled",true);$("select").O("disabled",true);$("#consola").text("");$("#minute").text("00");$("#second").text("00");$("#AO-PTN").text("00");$("#AKA-PTN").text("00");$("#categoria").O("disabled",false);$("#categoria").focus()}function h(i,a){var e;alertify.confirm(i,a,function(){e=true;alertify.P("Senshu Removido")},function(){e=false;alertify.error("Accion Cancelada")});return e}$("#START").click(function(){if(H()){$("#categoria").O("disabled",true);$(".puntos").O("disabled",false);if($(this).H()=="Comenzar"){l();$(this).text("");$(this).append('<i class="far fa-stop-circle ">Detener</i>').M("btn-success").V("btn-warning").H("Detener");i=setInterval(function(){E();if(r.t==0&&r.s==0){$("#START").O("disabled",true);clearInterval(i);f();A("FIN DEL TIEMPO DE COMBATE")}},1e3)}else{clearInterval(i);f();$(this).text("").append('<i class="far fa-play-circle ">Comenzar</i>').M("btn-warning").V("btn-success").H("Comenzar")}}});$("#RESET").click(function(){$(".puntos").O("disabled",true);$("#minute").text(e<10?"0"+e:e);$("#second").text(n<10?"0"+n:n);$("#START").text("").append('<i class="far fa-play-circle ">Comenzar</i>').M("btn-warning").V("btn-success").H("Comenzar").O("disabled",false);r.s=e;r.t=n});function E(){r.t--;if(r.t==-1){r.t=59;r.s--;if(r.s==-1){r.s=e}}O()}function v(){r.s--;if(r.s==-1){r.s=e}O()}function K(){r.t++;if(r.t==60){r.t=0;r.s++;if(r.s>e){r.s=0}}O()}function N(){r.s++;if(r.s>e){r.s=0}O()}function O(){$("#minute").text(r.s<10?"0"+r.s:r.s);$("#second").text(r.t<10?"0"+r.t:r.t)}$(".tiempo").click(function(){var i=$(this).k("id");switch(i){case"-min":v();break;case"-seg":E();break;case"+min":N();break;case"+seg":K();break}});$(".puntos").click(function(){id=$(this).O("id");valor=$(this).H();if(!id.indexOf("AO")&&id.indexOf("UNDO")<0){if(r.$==""){s="AO-SENSHU";$("#AKA-SENSHU").O("disabled",true);$("#AO-SENSHU").k("id","AO-SENSHU REVOKE").text("").text(s);r.$="AO-SENSHU"}c.push(valor);r.l=0;$.U(c,function(i,a){r.l=parseInt(r.l)+parseInt(a);mostrar=r.l<10?"0"+r.l:r.l;$("#AO-PTN").text(mostrar)});console.log("AO: "+r.l)}if(!id.indexOf("AKA")&&id.indexOf("UNDO")<0){if(r.$==""){s="AKA-SENSHU";$("#AO-SENSHU").O("disabled",true);$("#AKA-SENSHU").k("id","AKA-SENSHU REVOKE").text("").text(s);r.$="AKA-SENSHU"}t.push(valor);r.o=0;$.U(t,function(i,a){r.o=parseInt(r.o)+parseInt(a);mostrar=r.o<10?"0"+r.o:r.o;$("#AKA-PTN").text(mostrar)});console.log("AKA: "+r.o)}if(!id.indexOf("AO")&&id.indexOf("UNDO")>0){c.pop();r.l=0;$.U(c,function(i,a){r.l=parseInt(r.l)+parseInt(a)});mostrar=r.l<10?"0"+r.l:r.l;$("#AO-PTN").text(mostrar)}if(!id.indexOf("AKA")&&id.indexOf("UNDO")>0){t.pop();r.o=0;$.U(t,function(i,a){r.o=parseInt(r.o)+parseInt(a)});mostrar=r.o<10?"0"+r.o:r.o;$("#AKA-PTN").text(mostrar)}});$(".senshu").click(function(){var i=$(this).H();var a=$(this).k("id");var e=$(this).text();var s="SENSHU";var n="Desea Remover Senshu";var t;if(a==e+" REVOKE"){$(this).text("");$(this).append('<i class="fas fa-check"></i>');$(this).k("id",r.$);$(".senshu").O("disabled",false);r.$=""}else{switch(a){case"AO-SENSHU":$("#AKA-SENSHU").text("");$("#AKA-SENSHU").append('<i class="fas fa-check"></i>');$("#AKA-SENSHU").O("disabled",true);$(this).k("id",a+" REVOKE");break;case"AKA-SENSHU":$("#AO-SENSHU").text("");$("#AO-SENSHU").append('<i class="fas fa-check"></i>');$("#AO-SENSHU").O("disabled",true);$(this).k("id",a+" REVOKE");break}$(this).text(a);r.$=a}});$(".amonestacion").m(function(){m($(this))});$(".descalificacion").click(function(){if(!r.v==""||!r.K==""){r.v="";r.K="";r.N="";$(".descalificacion").O("disabled",false)}else{m($(this));$(".descalificacion").O("disabled",true);$(this).O("disabled",false);alertify.P("KASHI: "+$(this).H().split("-")[0]);switch($(this).H().split("-")[0]){case"AO":r.N="AKA NO KASHI";break;case"AKA":r.N="AO NO KASHI";break}}});function m(i){id=i.k("id");valor=i.H();r[id]=valor;console.log(id+": "+r[id])}function H(){if(!r.v==""||!r.K==""){alertify.alert("KASHI","Fin del Combate, Ganador: "+r.N);$("#YAME").O("disabled",false);return false}else{if(r.A=="4"||r.h=="4"){r.N="AKA No Kashi";alertify.alert("KASHI",r.N);return false}if(r.u=="4"||r.S=="4"){r.N="AO No Kashi";alertify.alert("KASHI",r.N);return false}return true}}$("#YAME").click(function(){b()})});