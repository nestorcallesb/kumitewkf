$(document).ready(function(){d();var a,e,i=null,t={categoria:"",minuto:0,segundo:0,aka:0,ao:0,senshu:"",C1_AKA:"",C1_AO:"",C2_AKA:"",C2_AO:"",kiken:"",shikkaku:"",kashi:""},o=[],n=[];function r(){$(".grp-btn").prop("disabled",!1)}function c(a){var e;hora=(e=new Date,new Intl.DateTimeFormat("es-VE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(e).replace(/\//g,"-").replace(",","")),console.log(hora+": "+a),$("#consola").append($("<div><b>"+a+":</b> "+t.minuto+":"+t.segundo+" | AO: "+t.ao+" - AKA: "+t.aka+" | senshu: "+t.senshu+" "+hora+" </div>"))}function d(){$("button").prop("disabled",!0),$("select").prop("disabled",!0),$("#consola").text(""),$("#minute").text("00"),$("#second").text("00"),$("#AO-PTN").text("00"),$("#AKA-PTN").text("00"),$("#categoria").prop("disabled",!1),$("#categoria").focus()}function l(){t.segundo--,-1==t.segundo&&(t.segundo=59,t.minuto--,-1==t.minuto&&(t.minuto=a)),u()}function u(){$("#minute").text(t.minuto<10?"0"+t.minuto:t.minuto),$("#second").text(t.segundo<10?"0"+t.segundo:t.segundo)}function p(a){id=a.attr("id"),valor=a.val(),t[id]=valor,console.log(id+": "+t[id])}$("#categoria").change(function(){var i=$(this).val();$(this).attr("id");switch(i){case"Junior":t.categoria="Junior",t.minuto=2,t.segundo=0;break;case"Cadete":t.categoria="Cadete",t.minuto=2,t.segundo=0;break;case"Sub-21":t.categoria="Sub-21",t.minuto=3,t.segundo=0;break;case"Senior":t.categoria="Senior",t.minuto=3,t.segundo=0;break;case"Libre":t.categoria="Libre",t.minuto=1,t.segundo=30;break;default:return void d()}$.each(t,function(a,e){console.log("Pizarra: "+a+": "+t[a])}),t,a=t.minuto,e=t.segundo,u(),$("#START").prop("disabled",!1),$(".tiempo").prop("disabled",!1),$(".amonestacion").prop("disabled",!1),$(".descalificacion").prop("disabled",!1),$("#consola").text("")}),$("button").click(function(){$(this).val();c($(this).attr("id"))}),$("select").change(function(){var a=$(this).val();c($(this).attr("id")+" "+a)}),$("#START").click(function(){(""==!t.kiken||""==!t.shikkaku?(alertify.alert("KASHI","Fin del Combate, Ganador: "+t.kashi),$("#YAME").prop("disabled",!1),0):"4"==t.C1_AO||"4"==t.C2_AO?(t.kashi="AKA No Kashi",alertify.alert("KASHI",t.kashi),0):"4"!=t.C1_AKA&&"4"!=t.C2_AKA||(t.kashi="AO No Kashi",alertify.alert("KASHI",t.kashi),0))&&($("#categoria").prop("disabled",!0),$(".puntos").prop("disabled",!1),"Comenzar"==$(this).val()?($(".grp-btn").prop("disabled",!0),$(this).text(""),$(this).append('<i class="far fa-stop-circle ">Detener</i>').removeClass("btn-success").addClass("btn-warning").val("Detener"),i=setInterval(function(){l(),0==t.segundo&&0==t.minuto&&($("#START").prop("disabled",!0),clearInterval(i),r(),c("FIN DEL TIEMPO DE COMBATE"))},1e3)):(clearInterval(i),r(),$(this).text("").append('<i class="far fa-play-circle ">Comenzar</i>').removeClass("btn-warning").addClass("btn-success").val("Comenzar")))}),$("#RESET").click(function(){$(".puntos").prop("disabled",!0),$("#minute").text(a<10?"0"+a:a),$("#second").text(e<10?"0"+e:e),$("#START").text("").append('<i class="far fa-play-circle ">Comenzar</i>').removeClass("btn-warning").addClass("btn-success").val("Comenzar").prop("disabled",!1),t.minuto=a,t.segundo=e}),$(".tiempo").click(function(){switch($(this).attr("id")){case"-min":t.minuto--,-1==t.minuto&&(t.minuto=a),u();break;case"-seg":l();break;case"+min":t.minuto++,t.minuto>a&&(t.minuto=0),u();break;case"+seg":t.segundo++,60==t.segundo&&(t.segundo=0,t.minuto++,t.minuto>a&&(t.minuto=0)),u()}}),$(".puntos").click(function(){id=$(this).prop("id"),valor=$(this).val(),!id.indexOf("AO")&&id.indexOf("UNDO")<0&&(""==t.senshu&&(s="AO-SENSHU",$("#AKA-SENSHU").prop("disabled",!0),$("#AO-SENSHU").attr("id","AO-SENSHU REVOKE").text("").text(s),t.senshu="AO-SENSHU"),n.push(valor),t.ao=0,$.each(n,function(a,e){console.log("AO: "+a+"= "+e),t.ao=parseInt(t.ao)+parseInt(e),mostrar=t.ao<10?"0"+t.ao:t.ao,$("#AO-PTN").text(mostrar)}),console.log("AO: "+t.ao)),!id.indexOf("AKA")&&id.indexOf("UNDO")<0&&(""==t.senshu&&(s="AKA-SENSHU",$("#AO-SENSHU").prop("disabled",!0),$("#AKA-SENSHU").attr("id","AKA-SENSHU REVOKE").text("").text(s),t.senshu="AKA-SENSHU"),o.push(valor),t.aka=0,$.each(o,function(a,e){console.log("AKA: "+a+"= "+e),t.aka=parseInt(t.aka)+parseInt(e),mostrar=t.aka<10?"0"+t.aka:t.aka,$("#AKA-PTN").text(mostrar)}),console.log("AKA: "+t.aka)),!id.indexOf("AO")&&id.indexOf("UNDO")>0&&(n.pop(),t.ao=0,$.each(n,function(a,e){console.log("AO: "+a+"= "+e),t.ao=parseInt(t.ao)+parseInt(e)}),mostrar=t.ao<10?"0"+t.ao:t.ao,$("#AO-PTN").text(mostrar)),!id.indexOf("AKA")&&id.indexOf("UNDO")>0&&(o.pop(),t.aka=0,$.each(o,function(a,e){console.log("AKA: "+a+"= "+e),t.aka=parseInt(t.aka)+parseInt(e)}),mostrar=t.aka<10?"0"+t.aka:t.aka,$("#AKA-PTN").text(mostrar))}),$(".senshu").click(function(){$(this).val();var a=$(this).attr("id");if(a==$(this).text()+" REVOKE")$(this).text(""),$(this).append('<i class="fas fa-check"></i>'),$(this).attr("id",t.senshu),$(".senshu").prop("disabled",!1),t.senshu="";else{switch(a){case"AO-SENSHU":$("#AKA-SENSHU").text(""),$("#AKA-SENSHU").append('<i class="fas fa-check"></i>'),$("#AKA-SENSHU").prop("disabled",!0),$(this).attr("id",a+" REVOKE");break;case"AKA-SENSHU":$("#AO-SENSHU").text(""),$("#AO-SENSHU").append('<i class="fas fa-check"></i>'),$("#AO-SENSHU").prop("disabled",!0),$(this).attr("id",a+" REVOKE")}$(this).text(a),t.senshu=a}}),$(".amonestacion").change(function(){p($(this))}),$(".descalificacion").click(function(){if(""==!t.kiken||""==!t.shikkaku)t.kiken="",t.shikkaku="",t.kashi="",$(".descalificacion").prop("disabled",!1);else switch(p($(this)),$(".descalificacion").prop("disabled",!0),$(this).prop("disabled",!1),alertify.success("KASHI: "+$(this).val().split("-")[0]),$(this).val().split("-")[0]){case"AO":t.kashi="AKA NO KASHI";break;case"AKA":t.kashi="AO NO KASHI"}}),$("#YAME").click(function(){d()})});